#!/bin/bash

source /PARA/app/scripts/cn-module.sh
source /PARA/app/other/vasp.5.4.4/vasp-module.sh
module load vasp/5.4.4-mpi3-O3-scalapack-vtst 

echo > comment_POSCAR_a
for i in 0.9719745313573029
do
a=$(printf "%.6f" `echo "scale=2;$i*(9.0591475300000006)"|bc`);
b=$(printf "%.6f" `echo "scale=2;$a*(-0.5)"|bc`);
c=$(printf "%.6f" `echo "scale=2;$b*(-1.732051)"|bc`);
cat >POSCAR<<!
VASP @ Device Studio                    
   1.00000000000000     
     $a    0.0000000000000000    0.0000000000000000
    $b    $c    0.0000000000000000
     0.0000000000000000    0.0000000000000000    18.2887999999999984
   Ti
    72
Direct
  0.0000000000000000  0.0000000000000000  0.4861953559828933
  0.9999999894580682  0.4999999962908461  0.4861953559828933
  0.5000000168227743  0.0000000000000000  0.4861953559828933
  0.5000000062808425  0.4999999962908461  0.4861953559828933
  0.1666666703129351  0.3333333409938248  0.8400867035508099
  0.1666666597710034  0.8333333372846639  0.8400867035508099
  0.6666666871357094  0.3333333409938248  0.8400867035508099
  0.6666666765937777  0.8333333372846639  0.8400867035508099
  0.3333333435646679  0.1666666704905353  0.8906425805465616
  0.3333333406258703  0.6666666819876426  0.8906425805465616
  0.8333333340715043  0.1666666704905353  0.8906425805465616
  0.8333333574486446  0.6666666819876426  0.8906425805465616
  0.1666666703129351  0.3333333409938248  0.5367512329786521
  0.1666666597710034  0.8333333372846639  0.5367512329786521
  0.6666666871357094  0.3333333409938248  0.5367512329786521
  0.6666666765937777  0.8333333372846639  0.5367512329786521
  0.3333333435646679  0.1666666704905353  0.5873071099744109
  0.3333333406258703  0.6666666819876426  0.5873071099744109
  0.8333333340715043  0.1666666704905353  0.5873071099744109
  0.8333333574486446  0.6666666819876426  0.5873071099744109
  0.0000000000000000  0.0000000000000000  0.6378629869756338
  0.9999999894580682  0.4999999962908461  0.6378629869756338
  0.5000000168227743  0.0000000000000000  0.6378629869756338
  0.5000000062808425  0.4999999962908461  0.6378629869756338
  0.1666666703129351  0.3333333409938248  0.6884188639713926
  0.1666666597710034  0.8333333372846639  0.6884188639713926
  0.6666666871357094  0.3333333409938248  0.6884188639713926
  0.6666666765937777  0.8333333372846639  0.6884188639713926
  0.3333333435646679  0.1666666704905353  0.7389748452604863
  0.3333333406258703  0.6666666819876426  0.7389748452604863
  0.8333333340715043  0.1666666704905353  0.7389748452604863
  0.8333333574486446  0.6666666819876426  0.7389748452604863
  0.0000000000000000  0.0000000000000000  0.7895307222617092
  0.9999999894580682  0.4999999962908461  0.7895307222617092
  0.5000000168227743  0.0000000000000000  0.7895307222617092
  0.5000000062808425  0.4999999962908461  0.7895307222617092
  0.1111108477927232  0.8888889295706335  0.0000000000000000
  0.1111108477927232  0.8888889295706335  0.2512258993372996
  0.1111109088074613  0.5555556189638438  0.0000000000000000
  0.2222222135882532  0.7777776234378280  0.1256129366333525
  0.1111109088074613  0.5555556189638438  0.2512258993372996
  0.4444441929115612  0.8888889295706335  0.0000000000000000
  0.1111109595516737  0.2222223083698012  0.0000000000000000
  0.2222222135882532  0.7777776234378280  0.3768388359706520
  0.2222222536363105  0.4444442824440031  0.1256129366333525
  0.4444441929115612  0.8888889295706335  0.2512258993372996
  0.1111109595516737  0.2222223083698012  0.2512258993372996
  0.4444442489699867  0.5555556189638438  0.0000000000000000
  0.2222222536363105  0.4444442824440031  0.3768388359706520
  0.5555555537397368  0.7777776234378280  0.1256129366333525
  0.2222223148693772  0.1111109870434746  0.1256129366333525
  0.4444442489699867  0.5555556189638438  0.2512258993372996
  0.7777775281177739  0.8888889295706335  0.0000000000000000
  0.4444442968441749  0.2222223083698012  0.0000000000000000
  0.5555555537397368  0.7777776234378280  0.3768388359706520
  0.2222223148693772  0.1111109870434746  0.3768388359706520
  0.5555555995720027  0.4444442824440031  0.1256129366333525
  0.7777775281177739  0.8888889295706335  0.2512258993372996
  0.4444442968441749  0.2222223083698012  0.2512258993372996
  0.7777775628165742  0.5555556189638438  0.0000000000000000
  0.5555555995720027  0.4444442824440031  0.3768388359706520
  0.8888888807442967  0.7777776234378280  0.1256129366333525
  0.5555556681898750  0.1111109870434746  0.1256129366333525
  0.7777775628165742  0.5555556189638438  0.2512258993372996
  0.7777776501536309  0.2222223083698012  0.0000000000000000
  0.8888888807442967  0.7777776234378280  0.3768388359706520
  0.5555556681898750  0.1111109870434746  0.3768388359706520
  0.8888889002495759  0.4444442824440031  0.1256129366333525
  0.7777776501536309  0.2222223083698012  0.2512258993372996
  0.8888889002495759  0.4444442824440031  0.3768388359706520
  0.8888889951944350  0.1111109870434746  0.1256129366333525
  0.8888889951944350  0.1111109870434746  0.3768388359706520
!
echo "a=$i";
srun -N 1 -n 24 -p paratera -J dilute-Ti vasp_std;
E=`grep "TOTEN" OUTCAR | tail -1|awk '{printf"%12.6f \n",$5}'`
#$5表示第5个元素
echo $i $E >> comment_POSCAR_a
done
cat comment_POSCAR_a